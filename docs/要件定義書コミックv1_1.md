
## プロジェクト要件定義書 - unbelong (マンガ/イラスト公開サイト) - v1.1

### 1. プロジェクト概要

| 項目             | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| :--------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **プロジェクト名** | unbelong (アンビロング)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **目的**         | マンガ作家「belong」の自作マンガおよびイラスト作品をオンラインで公開し、読者や閲覧者が自由にアクセスできるプラットフォームを提供する。<br>作品への没入感を重視しつつ、SNSでの共有・拡散を促進するUI/UXを目指す。**効率的なコンテンツ運用のため、自作の管理画面（CMS）を構築し、非エンジニアでも容易にコンテンツ更新・管理が可能な環境を確立する。** 将来的には有料サービス展開も視野に入れる。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **ターゲット**   | 主にスマートフォンユーザー (想定比率: スマートフォン 9割 : PC 1割)。国内外問わず、マンガ・イラストコンテンツを好む層。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **ビジョン**     | 「belong」の作品を世界中の人々に届け、ファンとの交流を深める拠点となる。作品の魅力を最大限に引き出し、新たなファンを獲得するためのハブとなることを目指す。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **スコープ**     | **フェーズ1 (本要件定義書対象):** マンガ掲載サイト `comic.unbelong.xyz`、イラストポートフォリオサイト `illust.unbelong.xyz`、**および自作管理画面 `admin.unbelong.xyz`** の開発・公開。<br>作品閲覧、情報表示、共有機能、コメント機能（即時反映、管理画面あり）の実装。<br>**管理画面にて、作品の新規作成・編集・削除、画像アップロード・管理、コメント承認・編集・削除機能を提供する。**<br>**フェーズ2以降 (将来):** 有料サービス（サブスクリプションなど）、多言語対応、ユーザー認証、その他高度な機能拡張を検討。 |

---

### 2. ドメイン・URL構造

| 項目                 | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| :------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **ルートドメイン**   | `unbelong.xyz` (Namecheapにて取得済み)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **マンガサイトURL**  | `comic.unbelong.xyz` (サブドメインとして運用)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **イラストサイトURL** | `illust.unbelong.xyz` (サブドメインとして運用)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **管理画面URL**      | `admin.unbelong.xyz` (サブドメインとして運用、**フェーズ1の開発対象**。コメント管理、コンテンツ管理、画像管理などを集約する。)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **画像CDN URL**      | Cloudflare Imagesのカスタムドメイン設定により、**`img.unbelong.xyz` を画像配信に利用する。**<br>これにより、URLの安定性、ブランディング、将来的なサービス移管の柔軟性を確保する。<br>Cloudflare Imagesによって自動生成されるURL（例: `https://imagedelivery.net/<ACCOUNT_HASH>/<IMAGE_ID>/<VARIANT>`) は直接使用しない。<br>補助的に既存の `img.be2long.com` も利用可能とするが、移行を推奨。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **作品URL構造**      | **マンガ:** `comic.unbelong.xyz/comics/<作品ID>/<話数ID>`<br>**イラスト:** `illust.unbelong.xyz/illustrations/<作品ID>` (または `illust.unbelong.xyz/illustrations/<カテゴリー>/<作品ID>` など、イラストの分類に応じて検討)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **著者ページURL**    | `comic.unbelong.xyz/author` および `illust.unbelong.xyz/author` (あるいは、共通で `unbelong.xyz/author` も検討)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **作品一覧URL**      | `comic.unbelong.xyz/comics` および `illust.unbelong.xyz/illustrations`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

---

### 3. 技術スタック

| 項目              | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| :---------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **フロントエンド**  | Next.js (Reactベースのフルスタックフレームワーク) <br>**※閲覧サイト (`comic.unbelong.xyz`, `illust.unbelong.xyz`) および管理画面 (`admin.unbelong.xyz`) の両方で採用。**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **バックエンド**    | Cloudflare Workers (APIエンドポイント、コメント処理、Stripe連携、**管理画面からのデータ操作API、Cloudflare Images連携API** など)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **データベース**    | Cloudflare D1 (SQLiteベースのサーバーレスデータベース。コメントデータ、作品メタデータ、**各作品のMDコンテンツ、画像メタデータ（Cloudflare Imagesの`IMAGE_ID`など）**、将来的なユーザー情報などを管理)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **ホスティング**    | Cloudflare Pages (Next.jsアプリケーションのデプロイ、CI/CD) <br>**※閲覧サイトと管理画面はそれぞれ別のCloudflare Pagesプロジェクトとしてデプロイすることを推奨。**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **画像CDN**       | Cloudflare Images (Image Resizing機能による画像最適化・配信) をメインで採用。<br>**カスタムドメイン `img.unbelong.xyz` を利用する。**<br>補助的に既存のロリポップ！サーバー上の `img.be2long.com` を利用できるよう考慮するが、Cloudflare Imagesへの移行を推奨する。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **認証**          | **フェーズ1では管理画面向けに簡易認証を実装（例: 環境変数によるBasic認証、またはCloudflare Access連携など）。**閲覧サイトではユーザー認証は不要。コメントはユーザー名なしで投稿可能。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **CI/CD**         | GitHub (リポジトリ管理) + Cloudflare Pagesの自動デプロイ機能 (GitHub連携)<br>**閲覧サイトは、D1のコンテンツ更新をトリガーにCloudflare Pagesのビルドを走らせる（Webhook利用を想定）。**管理画面はGitHubへのプッシュで自動デプロイ。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **決済サービス**    | **将来的な有料化検討時にStripeを採用する**ことを推奨。Next.js/Cloudflare Workers/D1構成との親和性が高く、豊富な機能と安定性、グローバル対応が強み。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **モニタリング**    | Cloudflare Pages/Workersの組み込みAnalytics機能を利用。追加の外部監視ツールはフェーズ1では導入しない。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **開発言語/環境** | TypeScript, JavaScript, Node.js                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **その他**        | MDX (Markdown with JSX) の導入を検討。これにより、Markdown内にReactコンポーネントを埋め込むことが可能になり、柔軟なコンテンツ表現やインタラクティブな要素の追加に役立つ。<br>（例：マンガの特定のコマにアニメーション、インタラクティブな注釈など）<br>**※MDコンテンツはGitHubではなくCloudflare D1に保存される。**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

---

### 4. サイトUI構成

#### 4.1. 全体レイアウト (PC版)

*   **中央メイン領域:**
    *   マンガ作品の本文、イラスト作品の表示。
    *   **D1から取得したMD形式の記事をレンダリングし、Cloudflare Images (`img.unbelong.xyz`) の画像をURLで読み込む形式。**
    *   縦スクロール形式。読者の没入感を最優先。
    *   レスポンシブデザインにより、PCとスマホで表示を最適化。
*   **右サイドエリア:**
    *   メインエリアで表示しているマンガ作品の目次 (各話のページ番号/タイトル)。
    *   メインエリアのスクロール位置に応じて、現在表示中のページ番号がハイライト表示される (ホバー時にも視覚的に分かりやすく)。
    *   ページ番号クリックで、メインエリアの該当箇所にスムーズスクロール (アンカー表示)。
    *   Intersection Observer API を利用して、メインエリアのスクロールと目次のハイライトを連携させる。
    *   目次が長い場合はスクロールバーを表示し、可読性を維持。
*   **左サイドエリア:**
    *   TOP (`unbelong` ロゴ): クリックでサイトトップページへ遷移。
    *   作品一覧: マンガ作品一覧ページへのリンク。
    *   作者: 作者プロフィールページへのリンク。
    *   （イラストサイトでは「作品一覧」が「イラスト一覧」など、コンテンツに応じて変更）

#### 4.2. スマートフォンUI/UX (最優先)

*   **基本方針:** スマホでの片手操作、指先でのタップ、縦スクロールのしやすさを最優先に設計。
*   **左サイドエリア:**
    *   **格納方法:** 左上 (一般的なUI) または右下 (片手操作を意識) のハンバーガーメニューに格納。**左上に配置**することを推奨。
    *   ハンバーガーメニュー展開時に、左サイドエリアの内容 (ロゴ、作品一覧、作者) を表示。
*   **右サイドエリア (目次):**
    *   **格納方法:** 右上のアイコン (目次アイコンなど) をタップすると、オーバーレイまたはサイドシートで表示。
    *   メインコンテンツの邪魔にならないように表示・非表示を切り替えられるようにする。
*   **中央メイン領域:**
    *   縦スクロールに特化。画像の幅はデバイスに最適化し、テキストは読みやすいフォントサイズと行間を設定。
    *   ピンチイン・アウトによる拡大・縮小もスムーズに行えるようにする。

---

### 5. コンテンツ管理・運用

#### 5.1. 作品コンテンツ

*   **マンガ作品:** 「Peach Float」「Blue Moon Madness」「さくら団地」「落書き」を初期掲載。将来的に追加の可能性あり。
    *   1話あたり平均20ページ (20画像)。増減の可能性あり。
    *   作品ごとのトップページは不要。いきなり第1話から開始。
*   **イラスト作品:** ポートフォリオとして1枚絵を掲載。
*   **画像形式:** WebPを標準とする。
*   **画像解像度:** Cloudflare Imagesの特性を活かし、アップロードするオリジナル画像は高解像度 (例: 横幅2000px程度) で保存。配信時にCloudflare Imagesがデバイスに応じた最適な横幅 (例: スマホ向け750px、PC向け1200pxなど) に変換して配信。
*   **コンテンツ管理方式:**
    *   **作品の各話コンテンツはMarkdown形式で、Cloudflare D1に保存される。**
    *   **画像は自作管理画面からCloudflare Imagesにアップロードされ、`IMAGE_ID`がD1に保存される画像メタデータと紐付けられる。**
    *   Markdownファイル内には、`![代替テキスト](https://img.unbelong.xyz/<IMAGE_ID>/<VARIANT>)` の形式で画像URLを直接記述する、またはD1の画像メタデータを参照するカスタム構文（例: `{{image_id:ABCDEFGH, variant:public}}`）を利用し、Next.jsでレンダリング時に置き換える方式を検討。**（後者のカスタム構文利用を推奨）**
    *   作品タイトル、話数タイトル、あらすじ、更新日などのメタデータはD1の作品管理テーブルで一元管理される。

#### 5.2. 作品更新方法

*   **更新頻度:** マンガは週1話更新 (3タイトルの中からいずれか1話)。イラストは不定期。
*   **ワークフロー:**
    1.  **自作管理画面 (`admin.unbelong.xyz`) にログイン。**
    2.  「作品管理」メニューから新規話数を追加、または既存の話数を編集。
    3.  **管理画面のUIからオリジナル画像をアップロード（Cloudflare Imagesに連携）。**
    4.  **アップロードされた画像を選択し、コンテンツ（D1に保存されるMarkdown）に挿入。**
    5.  作品タイトル、話数タイトル、あらすじ、公開日などのメタデータを入力し、保存。
    6.  **管理画面から公開処理を実行すると、Cloudflare PagesのビルドをトリガーするWebhookが実行される。**
    7.  Cloudflare PagesがD1から最新コンテンツをフェッチし、自動でビルド・デプロイ。
    8.  閲覧サイトに最新の作品が反映される。

---

### 6. 機能要件

#### 6.1. 閲覧機能 (閲覧サイト: `comic.unbelong.xyz`, `illust.unbelong.xyz`)

*   **マンガ作品の縦スクロール表示:** スマホでの読書に最適化された縦スクロール表示。
*   **イラスト作品のギャラリー表示:** 各作品をクリックすると拡大表示や詳細情報表示。
*   **目次機能:** 右サイドエリア (PC) / ハンバーガーメニュー内オーバーレイ (スマホ) からの各ページへの直接アクセス。
*   **作品一覧:** 全作品のタイトル、サムネイル、最新話などの表示。
*   **作者プロフィールページ:** 作者「belong」の紹介、連絡先、SNSリンクなど。
*   **作品間のナビゲーション:** 前の作品/次の作品、前の話/次の話への移動ボタン。

#### 6.2. 共有・拡散機能 (閲覧サイト)

*   **SNS共有ボタン:** 各タイトル、各話のページ上部に設置。
    *   対応SNS: X (旧Twitter), Facebook, LINEなどを想定。
    *   OGP設定により、シェア時に適切なタイトル、説明、OGP画像が表示されるようにする。

#### 6.3. コメント機能 (閲覧サイト & 管理画面)

*   **設置場所:** 各タイトル、各話のページ下部。
*   **投稿フォーム:**
    *   ユーザーネームなし (匿名)。
    *   150文字程度のテキスト入力フィールド。
    *   投稿日時 (タイムスタンプ) を自動付与。
    *   入力バリデーション (文字数制限など)。
*   **反映ロジック:** ユーザー投稿後、**即時**サイトに反映される。(変更なし)
*   **データ保存:** Cloudflare D1 にコメントデータを保存。
*   **管理機能 (管理画面 `admin.unbelong.xyz`):**
    *   管理画面から、コメントの承認、編集、削除が可能。
    *   新規コメント投稿時に `mail@unbelong.xyz` へ通知メールを送信。
*   **不要な機能:** いいね機能は不要。

#### 6.4. 管理画面機能 (`admin.unbelong.xyz`) **[新規追加・変更]**

*   **ログイン機能:** 管理者用ログイン（簡易認証、またはCloudflare Access連携）。
*   **ダッシュボード:** サイト全体の簡易的な状況表示（最新コメント、最新更新作品、アクセス数概要など）。
*   **作品管理:**
    *   新規漫画/イラスト作品の作成。
    *   既存作品の編集・削除。
    *   話数の追加・編集・削除、公開/非公開設定。
    *   各話のページごとの画像（Cloudflare Images `IMAGE_ID`）とMarkdownコンテンツの紐付け管理。
    *   作品メタデータ（タイトル、あらすじ、タグ、OGP設定など）の管理。
    *   コンテンツプレビュー機能。
*   **画像管理:**
    *   Cloudflare Imagesへの画像アップロード機能（ドラッグ＆ドロップ、複数選択対応）。
    *   アップロード済み画像の一覧表示、検索、フィルタリング。
    *   画像の削除。
    *   画像メタデータ（代替テキストなど）の編集。
*   **コメント管理:**
    *   投稿されたコメントの一覧表示、検索、フィルタリング。
    *   コメントの承認（公開/非公開）、編集、削除。
*   **設定管理:**
    *   作者プロフィール情報の編集。
    *   サイト共通のOGP設定、ファビコン設定。

#### 6.5. SEO対策

*   **タイトル・ディスクリプション:** 各作品のタイトルや話数、説明文は、検索エンジン最適化 (SEO) を意識して設定。Next.jsの`next/head`や`next/seo`ライブラリを利用。**管理画面から設定可能にする。**
*   **OGP (Open Graph Protocol) 設定:** 各ページで適切なOGPを設定。
    *   OGP画像はロゴ画像をベースにチューニングし、各作品や話数に合わせたものを動的に生成または指定。**管理画面から設定可能にする。**

#### 6.6. その他の機能

*   **ファビコン:** サイトのファビコンを設定。**管理画面から設定可能にする。**

---

### 7. 非機能要件

| 項目         | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ****             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             